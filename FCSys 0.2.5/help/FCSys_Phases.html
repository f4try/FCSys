<html>
<head>
<title>FCSys.Phases</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Mixtures of species">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/Documentation/ModelicaDoc.css">
<link rel="shortcut icon" href="../Resources/Documentation/favicon.ico">
</head>
<body>
<div class="sidebar">
  <div class="sidebarwrapper">
  <a href="FCSys.html">
<h2>FCSys</h2>
</a>
  <p align=center><a href="FCSys.html">
    <img src="../Resources/Documentation/icon.gif" alt="Logo" width=150>
  </a></p>

<h3>Table of Contents</h3>

    <ul>
    <li><a href="FCSys_UsersGuide.html">User's Guide</a></li>
    <li><a href="FCSys_Blocks.html">Blocks</a></li>
    <li><a href="FCSys_Conditions.html">Conditions</a></li>
    <li><a href="FCSys_Assemblies.html">Assemblies</a></li>
    <li><a href="FCSys_Regions.html">Regions</a></li>
    <li><a href="FCSys_Subregions.html">Subregions</a></li>
    <li><a href="FCSys_Phases.html">Phases</a></li>
    <li><a href="FCSys_Species.html">Species</a></li>
    <li><a href="FCSys_Chemistry.html">Chemistry</a></li>
    <li><a href="FCSys_Connectors.html">Connectors</a></li>
    <li><a href="FCSys_Characteristics.html">Characteristics</a></li>
    <li><a href="FCSys_Units.html">Units</a></li>
    <li><a href="FCSys_Quantities.html">Quantities</a></li>
    <li><a href="FCSys_Utilities.html">Utilities</a></li>
    <li><a href="FCSys_Icons.html">Icons</a></li>
    </ul>
  </div>
</div>

<div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper">
      <div class="body">
<h2><a name="FCSys.Phases"></a><a href="FCSys.html#FCSys">FCSys</a>.Phases</h2>

<b>Mixtures of species</b>

<h3>Information</h3>

<p>The graphite, ionomer, and
liquid phases can only be used with a compressible phase (gas).</p>

Extends from <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).

<h3>Package Content</h3>

<table border=1 cellspacing=0 cellpadding=2 >
<tr><th>Name</th><th>Description</th></tr>
<tr><td><img src="FCSys.Phases.GasS.png" alt="FCSys.Phases.Gas" width=20  height=20 align=top>&nbsp;<a href="FCSys_Phases.html#FCSys.Phases.Gas">Gas</a>
</td><td>Gas phase</td></tr>
<tr><td><img src="FCSys.Phases.GraphiteS.png" alt="FCSys.Phases.Graphite" width=20  height=20 align=top>&nbsp;<a href="FCSys_Phases.html#FCSys.Phases.Graphite">Graphite</a>
</td><td>Graphite phase</td></tr>
<tr><td><img src="FCSys.Phases.IonomerS.png" alt="FCSys.Phases.Ionomer" width=20  height=20 align=top>&nbsp;<a href="FCSys_Phases.html#FCSys.Phases.Ionomer">Ionomer</a>
</td><td>Ionomer phase</td></tr>
<tr><td><img src="FCSys.Phases.LiquidS.png" alt="FCSys.Phases.Liquid" width=20  height=20 align=top>&nbsp;<a href="FCSys_Phases.html#FCSys.Phases.Liquid">Liquid</a>
</td><td>Liquid phase</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a>
</td><td>Base model for a phase</td></tr>
<tr><td><img src="FCSys.Phases.ExchangeParamsS.png" alt="FCSys.Phases.ExchangeParams" width=20  height=20 align=top>&nbsp;<a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a>
</td><td>Independence factors for an exchange process</td></tr>
</table>
<hr>

<h2><img src="FCSys.Phases.GasI.png" alt="FCSys.Phases.Gas" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Phases.Gas"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.Gas</h2>
<b>Gas phase</b>
<img src="FCSys.Phases.GasD.png" alt="FCSys.Phases.Gas">

<h3>Information</h3>

<p>It is usually appropriate to assume that species
    exist at the same temperature within a phase.  The time constants for thermal exchange
 (&tau;<sub><i>Q</i>E</sub>)
    are usually much shorter than the time span of interest due to the very small coupling
    resistances.  If this is the case, set <code>common.k_Q</code> to zero.

    This will reduce the index of the problem, so it may be

    necessary to eliminate some initial conditions.</p>

    <p>In bulk flow, it is usually appropriate to assume that species travel with the same velocity within
    a phase.  If this is the case, set the entries of <code>common.k_Phi</code>
    to zero.  This will reduce the index of the problem, so it may be

    necessary to eliminate some initial conditions.</p>

<p>Please see the documentation of the <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> model.</p>
Extends from <a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Gas">Icons.Phases.Gas</a> (Icon for a gas phase), <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> (Base model for a phase).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>countTrue({inclH2,inclH2O,in&hellip;</td><td>Number of species</td></tr>
<tr><td>Integer</td><td>n_trans</td><td>1</td><td>Number of transport axes</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Volume">Volume</a></td><td>V</td><td>dalton.V</td><td>Volume of the phase [L3]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Length factors for transport [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Independence factors</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Phi[n_inter, n_trans]</td><td>ones(n_inter, n_trans)</td><td>For translational exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Q[n_inter]</td><td>ones(n_inter)</td><td>For thermal exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>common</td><td>&nbsp;</td><td>Among species in the phase</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>H2_H2O</td><td>&nbsp;</td><td>Between H<sub>2</sub> and H<sub>2</sub>O</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>H2O_N2</td><td>&nbsp;</td><td>Between H<sub>2</sub>O and N<sub>2</sub></td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>H2O_O2</td><td>&nbsp;</td><td>Between H<sub>2</sub>O and O<sub>2</sub></td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>N2_O2</td><td>&nbsp;</td><td>Between N<sub>2</sub> and O<sub>2</sub></td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Species</td></tr>
<tr><td>Boolean</td><td>inclH2</td><td>false</td><td>Include H2</td></tr>
<tr><td><a href="FCSys_Species_H2_Gas.html#FCSys.Species.H2.Gas.Fixed">Fixed</a></td><td>H2</td><td>redeclare FCSys.Species.H2.G&hellip;</td><td>H2 model</td></tr>
<tr><td>Boolean</td><td>inclH2O</td><td>false</td><td>Include H2O</td></tr>
<tr><td><a href="FCSys_Species_H2O_Gas.html#FCSys.Species.H2O.Gas.Fixed">Fixed</a></td><td>H2O</td><td>redeclare FCSys.Species.H2O&hellip;.</td><td>H2O model</td></tr>
<tr><td>Boolean</td><td>inclN2</td><td>false</td><td>Include N2</td></tr>
<tr><td><a href="FCSys_Species_N2_Gas.html#FCSys.Species.N2.Gas.Fixed">Fixed</a></td><td>N2</td><td>redeclare FCSys.Species.N2.G&hellip;</td><td>N2 model</td></tr>
<tr><td>Boolean</td><td>inclO2</td><td>false</td><td>Include O2</td></tr>
<tr><td><a href="FCSys_Species_O2_Gas.html#FCSys.Species.O2.Gas.Fixed">Fixed</a></td><td>O2</td><td>redeclare FCSys.Species.O2.G&hellip;</td><td>O2 model</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xNegative</td><td>Negative boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yNegative</td><td>Negative boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zNegative</td><td>Negative boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xPositive</td><td>Positive boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yPositive</td><td>Positive boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zPositive</td><td>Positive boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Dalton">Dalton</a></td><td>dalton</td><td>Connector for additivity of pressure</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Inter</a></td><td>inter[n_inter]</td><td>Connector to exchange momentum and energy with other phases</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>chemH2[H2.n_chem]</td><td>Chemical connector for H2</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>chemH2O[H2O.n_chem]</td><td>Chemical connector for H2O</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>chemO2[O2.n_chem]</td><td>Chemical connector for O2</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Gas <font color="darkgreen">&quot;Gas phase&quot;</font>
  <font color="blue">import </font>Modelica.Constants.inf;
  <font color="blue">import </font><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Math_BooleanVectors.html#Modelica.Math.BooleanVectors.countTrue">Modelica.Math.BooleanVectors.countTrue</a>;
  <font color="blue">import </font><a href="FCSys_Characteristics_MobilityFactors.html#FCSys.Characteristics.MobilityFactors">FCSys.Characteristics.MobilityFactors</a>;

  <font color="blue">extends </font><a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Gas">Icons.Phases.Gas</a>;
  <font color="blue">extends </font><a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a>(<font color="blue">final </font>n_spec=<font color="red">countTrue</font>({inclH2,inclH2O,inclN2,inclO2}), <font color="blue">
      final </font>V=dalton.V);

  <font color="darkgreen">// Conditionally include species.</font>
  <font color="blue">parameter </font>Boolean inclH2=false <font color="darkgreen">&quot;Include H2&quot;</font>;
  <font color="blue">replaceable </font><a href="FCSys_Species_H2_Gas.html#FCSys.Species.H2.Gas.Fixed">FCSys.Species.H2.Gas.Fixed</a> H2(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>inclH2 <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=2,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],H2_H2O.k_Phi[cartTrans]},
    k_intra_Q={common.k_Q,H2_H2O.k_Q}) <font color="darkgreen">&quot;H2 model&quot;</font>;

  <font color="blue">parameter </font>Boolean inclH2O=false <font color="darkgreen">&quot;Include H2O&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_H2O_Gas.html#FCSys.Species.H2O.Gas.Fixed">FCSys.Species.H2O.Gas.Fixed</a> H2O(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>inclH2O <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=4,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],H2_H2O.k_Phi[cartTrans],H2O_N2.k_Phi[
        cartTrans],H2O_O2.k_Phi[cartTrans]},
    k_intra_Q={common.k_Q,H2_H2O.k_Q,H2O_N2.k_Q,H2O_O2.k_Q}) <font color="darkgreen">&quot;H2O model&quot;</font>;

  <font color="blue">parameter </font>Boolean inclN2=false <font color="darkgreen">&quot;Include N2&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_N2_Gas.html#FCSys.Species.N2.Gas.Fixed">FCSys.Species.N2.Gas.Fixed</a> N2(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>inclN2 <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=3,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],H2O_N2.k_Phi[cartTrans],N2_O2.k_Phi[
        cartTrans]},
    k_intra_Q={common.k_Q,H2O_N2.k_Q,N2_O2.k_Q}) <font color="darkgreen">&quot;N2 model&quot;</font>;

  <font color="blue">parameter </font>Boolean inclO2=false <font color="darkgreen">&quot;Include O2&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_O2_Gas.html#FCSys.Species.O2.Gas.Fixed">FCSys.Species.O2.Gas.Fixed</a> O2(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>inclO2 <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=3,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],H2O_O2.k_Phi[cartTrans],N2_O2.k_Phi[
        cartTrans]},
    k_intra_Q={common.k_Q,H2O_O2.k_Q,N2_O2.k_Q}) <font color="darkgreen">&quot;O2 model&quot;</font>;

  <font color="darkgreen">// Independence factors</font>
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> common(k_Phi={inf,inf,inf}, k_Q=0) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Among species in the phase&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> H2_H2O(k_Phi=<font color="red">fill</font>(<font color="red">MobilityFactors.k_H2_H2O</font>(p_A=environment.p_dry,
        p_B=environment.p_H2O), 3), k_Q=inf) <font color="blue">if </font>inclH2<font color="blue"> or </font>inclH2O <font color="darkgreen">
    &quot;Between H<sub>2</sub> and H<sub>2</sub>O&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> H2O_N2(k_Phi=<font color="red">fill</font>(<font color="red">MobilityFactors.k_H2O_N2</font>(p_A=environment.p_H2O,
        p_B=environment.p_dry - environment.p_O2), 3), k_Q=inf) <font color="blue">if </font>inclH2O<font color="blue"> or </font>
    inclN2 <font color="darkgreen">&quot;Between H<sub>2</sub>O and N<sub>2</sub>&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> H2O_O2(k_Phi=<font color="red">fill</font>(<font color="red">MobilityFactors.k_H2O_O2</font>(p_A=environment.p_H2O,
        p_B=environment.p_O2), 3), k_Q=inf) <font color="blue">if </font>inclH2O<font color="blue"> or </font>inclO2 <font color="darkgreen">
    &quot;Between H<sub>2</sub>O and O<sub>2</sub>&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> N2_O2(k_Phi=<font color="red">fill</font>(<font color="red">MobilityFactors.k_N2_O2</font>(p_A=environment.p_dry -
        environment.p_O2, p_B=environment.p_O2), 3), k_Q=inf) <font color="blue">if </font>inclN2<font color="blue"> or </font>
    inclO2 <font color="darkgreen">&quot;Between N<sub>2</sub> and O<sub>2</sub>&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xNegative <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Negative boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yNegative <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Negative boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zNegative <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Negative boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xPositive <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Positive boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yPositive <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Positive boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zPositive <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Positive boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Dalton">Connectors.Dalton</a> dalton <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Connector for additivity of pressure&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Connectors.Inter</a> inter[n_inter](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Connector to exchange momentum and energy with other phases&quot;</font>;

  <font color="darkgreen">// Auxiliary variables (for analysis)</font>
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p(stateSelect=StateSelect.never) = dalton.p <font color="blue">if </font>
    n_spec &gt; 0<font color="blue"> and </font>environment.analysis <font color="darkgreen">&quot;Total thermodynamic pressure&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> chemH2[H2.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>inclH2 <font color="darkgreen">
    &quot;Chemical connector for H2&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> chemH2O[H2O.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>
    inclH2O <font color="darkgreen">&quot;Chemical connector for H2O&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> chemO2[O2.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>inclO2 <font color="darkgreen">
    &quot;Chemical connector for O2&quot;</font>;

<font color="blue">protected </font>
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchCommon <font color="darkgreen">
    &quot;Connector for exchange among species in the phase&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchH2_H2O <font color="darkgreen">&quot;Connector for exchange between H2 and H2O&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchH2O_N2 <font color="darkgreen">&quot;Connector for exchange between H2O and N2&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchH2O_O2 <font color="darkgreen">&quot;Connector for exchange between H2O and O2&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchN2_O2 <font color="darkgreen">&quot;Connector for exchange between N2 and O2&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Chemical exchange</font>
  <font color="red">connect</font>(O2.chemical, chemO2);
  <font color="red">connect</font>(H2.chemical, chemH2);
  <font color="red">connect</font>(H2O.chemical, chemH2O);

  <font color="darkgreen">// Inert exchange</font>
  <font color="red">connect</font>(H2.inter, inter);
  <font color="red">connect</font>(H2O.inter, inter);
  <font color="red">connect</font>(N2.inter, inter);
  <font color="red">connect</font>(O2.inter, inter);
  <font color="red">connect</font>(H2.intra[1], exchCommon.node);
  <font color="red">connect</font>(H2O.intra[1], exchCommon.node);
  <font color="red">connect</font>(N2.intra[1], exchCommon.node);
  <font color="red">connect</font>(O2.intra[1], exchCommon.node);
  <font color="red">connect</font>(H2.intra[2], exchH2_H2O.node);
  <font color="red">connect</font>(H2O.intra[2], exchH2_H2O.node);
  <font color="red">connect</font>(H2O.intra[3], exchH2O_N2.node);
  <font color="red">connect</font>(N2.intra[2], exchH2O_N2.node);
  <font color="red">connect</font>(H2O.intra[4], exchH2O_O2.node);
  <font color="red">connect</font>(O2.intra[2], exchH2O_O2.node);
  <font color="red">connect</font>(N2.intra[3], exchN2_O2.node);
  <font color="red">connect</font>(O2.intra[3], exchN2_O2.node);
  <font color="darkgreen">// Mixing</font>
  <font color="red">connect</font>(H2.dalton, dalton);
  <font color="red">connect</font>(H2O.dalton, dalton);
  <font color="red">connect</font>(N2.dalton, dalton);
  <font color="red">connect</font>(O2.dalton, dalton);

  <font color="darkgreen">// Transport</font>
  <font color="darkgreen">// ---------</font>
  <font color="darkgreen">// H2</font>
  <font color="red">connect</font>(H2.boundaries[transCart[Axis.x], Side.n], xNegative.H2);

  <font color="red">connect</font>(H2.boundaries[transCart[Axis.x], Side.p], xPositive.H2);

  <font color="red">connect</font>(H2.boundaries[transCart[Axis.y], Side.n], yNegative.H2);

  <font color="red">connect</font>(H2.boundaries[transCart[Axis.y], Side.p], yPositive.H2);

  <font color="red">connect</font>(H2.boundaries[transCart[Axis.z], Side.n], zNegative.H2);
  <font color="red">connect</font>(H2.boundaries[transCart[Axis.z], Side.p], zPositive.H2);
  <font color="darkgreen">// H2O</font>
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.n], xNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.p], xPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.n], yNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.p], yPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.n], zNegative.H2O);
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.p], zPositive.H2O);
  <font color="darkgreen">// N2</font>
  <font color="red">connect</font>(N2.boundaries[transCart[Axis.x], Side.n], xNegative.N2);

  <font color="red">connect</font>(N2.boundaries[transCart[Axis.x], Side.p], xPositive.N2);

  <font color="red">connect</font>(N2.boundaries[transCart[Axis.y], Side.n], yNegative.N2);

  <font color="red">connect</font>(N2.boundaries[transCart[Axis.y], Side.p], yPositive.N2);
  <font color="red">connect</font>(N2.boundaries[transCart[Axis.z], Side.n], zNegative.N2);
  <font color="red">connect</font>(N2.boundaries[transCart[Axis.z], Side.p], zPositive.N2);
  <font color="darkgreen">// O2</font>
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.x], Side.n], xNegative.O2);
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.x], Side.p], xPositive.O2);
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.y], Side.n], yNegative.O2);
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.y], Side.p], yPositive.O2);
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.z], Side.n], zNegative.O2);
  <font color="red">connect</font>(O2.boundaries[transCart[Axis.z], Side.p], zPositive.O2);
<font color="blue">end </font>Gas;
</pre>
<hr>

<h2><img src="FCSys.Phases.GraphiteI.png" alt="FCSys.Phases.Graphite" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Phases.Graphite"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.Graphite</h2>
<b>Graphite phase</b>
<img src="FCSys.Phases.GraphiteD.png" alt="FCSys.Phases.Graphite">

<h3>Information</h3>

<p>From a physical standpoint, the electrolytic double layer is probably best

    considered its own phase, but it is modeled as a part of the graphite phase in order to reduce the number of connections.  It is assumed to

    store no material, translational momentum, or thermal energy.  It only stores electrical energy due to a charge difference.</p>

    <p>C<sup>+</sup> and e<sup>-</sup> are assumed to have the same temperature.

    C<sup>+</sup> should be used to initialize the temperature.</p>

    <p>See <a href="FCSys_Species_'e-'_Graphite.html#FCSys.Species.'e-'.Graphite.Fixed">Species.'e-'.Graphite.Fixed</a> for assumptions.
    For more information, please see the
 <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> model.</p>
Extends from <a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Solid">Icons.Phases.Solid</a> (Icon for a solid phase), <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> (Base model for a phase).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>countTrue({&#39;inclC+&#39;,&#39;incle-&#39;})</td><td>Number of species</td></tr>
<tr><td>Integer</td><td>n_trans</td><td>1</td><td>Number of transport axes</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Volume">Volume</a></td><td>V</td><td>-amagat.V</td><td>Volume of the phase [L3]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Length factors for transport [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Independence factors</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Phi[n_inter, n_trans]</td><td>ones(n_inter, n_trans)</td><td>For translational exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Q[n_inter]</td><td>ones(n_inter)</td><td>For thermal exchange with other phases [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Species</td></tr>
<tr><td>Boolean</td><td>&#39;inclC+&#39;</td><td>false</td><td>Include C+</td></tr>
<tr><td><a href="FCSys_Species_'C+'_Graphite.html#FCSys.Species.'C+'.Graphite.Fixed">Fixed</a></td><td>&#39;C+&#39;</td><td>redeclare FCSys.Species.&#39;C+&#39;&hellip;</td><td>C+ model</td></tr>
<tr><td>Boolean</td><td>&#39;incle-&#39;</td><td>false</td><td>Include e-</td></tr>
<tr><td><a href="FCSys_Species_'e-'_Graphite.html#FCSys.Species.'e-'.Graphite.Fixed">Fixed</a></td><td>&#39;e-&#39;</td><td>redeclare FCSys.Species.&#39;e-&#39;&hellip;</td><td>e- model</td></tr>
<TR bgcolor="#c0c0c0"><TD colspan=4><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>&#39;incle-Transfer&#39;</td><td>false</td><td>Include electron transfer</td></tr>
<tr><td>Boolean</td><td>inclDL</td><td>false</td><td>Include the double-layer capacitance</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xNegative</td><td>Negative boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yNegative</td><td>Negative boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zNegative</td><td>Negative boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xPositive</td><td>Positive boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yPositive</td><td>Positive boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zPositive</td><td>Positive boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Inter</a></td><td>inter[n_inter]</td><td>Connector to exchange momentum and energy with other phases</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Amagat</a></td><td>amagat</td><td>Connector for additivity of volume</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>&#39;cheme-&#39;[1]</td><td>Chemical connector for e-</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Graphite <font color="darkgreen">&quot;Graphite phase&quot;</font>
  <font color="blue">import </font>assert = <a href="FCSys_Utilities.html#FCSys.Utilities.assertEval">FCSys.Utilities.assertEval</a>;
  <font color="blue">import </font><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Math_BooleanVectors.html#Modelica.Math.BooleanVectors.countTrue">Modelica.Math.BooleanVectors.countTrue</a>;

  <font color="blue">extends </font><a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Solid">Icons.Phases.Solid</a>;
  <font color="blue">extends </font><a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a>(<font color="blue">final </font>n_spec=<font color="red">countTrue</font>({'inclC+','incle-'}),<font color="blue">final </font>V=-
        amagat.V);

  <font color="darkgreen">// Conditionally include species.</font>
  <font color="blue">parameter </font>Boolean &#39;inclC+&#39;=false <font color="darkgreen">&quot;Include C+&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_'C+'_Graphite.html#FCSys.Species.'C+'.Graphite.Fixed">FCSys.Species.'C+'.Graphite.Fixed</a> &#39;C+&#39;(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL) <font color="blue">if </font>'inclC+' <font color="blue">constrainedby </font>FCSys.Species.Solid(
    n_trans=n_trans,
    n_intra=1,
    n_inter=n_inter,
    kL=kL,
    <font color="blue">final </font>k_intra_Phi={<font color="red">ones</font>(n_trans)},
    <font color="blue">final </font>k_intra_Q={0}) <font color="darkgreen">&quot;C+ model&quot;</font>;

  <font color="blue">parameter </font>Boolean &#39;incle-&#39;=false <font color="darkgreen">&quot;Include e-&quot;</font>;
  <font color="blue">replaceable </font><a href="FCSys_Species_'e-'_Graphite.html#FCSys.Species.'e-'.Graphite.Fixed">FCSys.Species.'e-'.Graphite.Fixed</a> &#39;e-&#39;(<font color="blue">final </font>n_trans, <font color="blue">final </font>
      n_inter) <font color="blue">if </font>'incle-' <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=1,
    n_inter=0,
    <font color="blue">final </font>k_intra_Phi={<font color="red">ones</font>(n_trans)},
    <font color="blue">final </font>k_intra_Q={0}) <font color="darkgreen">&quot;e- model&quot;</font>;

  <font color="blue">parameter </font>Boolean &#39;incle-Transfer&#39;=false <font color="darkgreen">&quot;Include electron transfer&quot;</font>;

  <font color="blue">parameter </font>Boolean inclDL=false <font color="darkgreen">&quot;Include the double-layer capacitance&quot;</font>;

  <a href="FCSys_Chemistry_Electrochemistry.html#FCSys.Chemistry.Electrochemistry.ElectronTransfer">Chemistry.Electrochemistry.ElectronTransfer</a> &#39;e-Transfer&#39;(<font color="blue">redeclare </font><font color="blue">constant </font>Integer
      n_trans=1) <font color="blue">if </font>'incle-'<font color="blue"> and </font>'incle-Transfer' <font color="darkgreen">&quot;Electron transfer&quot;</font>;
  <a href="FCSys_Chemistry_Electrochemistry.html#FCSys.Chemistry.Electrochemistry.DoubleLayer">Chemistry.Electrochemistry.DoubleLayer</a> doubleLayer(<font color="blue">redeclare </font><font color="blue">constant </font>Integer
      n_trans=1) <font color="blue">if </font>'incle-'<font color="blue"> and </font>'incle-Transfer'<font color="blue"> and </font>inclDL <font color="darkgreen">
    &quot;Electrolytic double layer&quot;</font>;
  <font color="darkgreen">// Note:  n_trans must be constant in Dymola 2014 to prevent errors such as</font>
  <font color="darkgreen">// &quot;Failed to expand the variable</font>
  <font color="darkgreen">// subregion.graphite.&#39;e-Transfer&#39;.negative.phi&quot;.  The setting of n_trans=1</font>
  <font color="darkgreen">// must be manually changed at instantiation if additional transport axes</font>
  <font color="darkgreen">//  are enabled.</font>

  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xNegative <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Negative boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yNegative <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Negative boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zNegative <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Negative boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xPositive <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Positive boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yPositive <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Positive boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zPositive <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Positive boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Connectors.Inter</a> inter[n_inter](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Connector to exchange momentum and energy with other phases&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Connectors.Amagat</a> amagat <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Connector for additivity of volume&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> &#39;cheme-&#39;[1](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>'incle-'<font color="blue"> and </font>
    'incle-Transfer' <font color="darkgreen">&quot;Chemical connector for e-&quot;</font>;

<font color="blue">protected </font>
  <a href="FCSys_Conditions_Adapters.html#FCSys.Conditions.Adapters.AmagatDalton">Conditions.Adapters.AmagatDalton</a> amagatDalton <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Adapter between additivity of volume and additivity of pressure&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchCommon <font color="darkgreen">
    &quot;Connector for exchange among all species in the phase&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Chemical exchange</font>
  <font color="red">connect</font>('e-Transfer'.negative, doubleLayer.negative);
  <font color="red">connect</font>('e-Transfer'.positive, doubleLayer.positive);
  <font color="red">connect</font>('e-Transfer'.negative, 'e-'.chemical[1]);
  <font color="red">connect</font>('e-Transfer'.positive, 'cheme-'[1]);

  <font color="darkgreen">// Inert exchange</font>
  <font color="red">connect</font>('C+'.inter, inter);
  <font color="red">connect</font>('C+'.intra[1], exchCommon.node);
  <font color="red">connect</font>('e-'.intra[1], exchCommon.node);
  <font color="red">connect</font>('e-Transfer'.inert, 'C+'.intra[1]);
  <font color="red">connect</font>(doubleLayer.inert, 'e-Transfer'.inert);

  <font color="darkgreen">// Mixing</font>
  <font color="red">connect</font>(amagatDalton.amagat, amagat);
  <font color="red">connect</font>(amagatDalton.dalton, 'C+'.dalton);
  <font color="red">connect</font>(amagatDalton.dalton, 'e-'.dalton);
  <font color="red">connect</font>(doubleLayer.amagat, amagat);

  <font color="darkgreen">// Transport</font>
  <font color="darkgreen">// ---------</font>
  <font color="darkgreen">// C+</font>
  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.x], Side.n], xNegative.'C+');
  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.x], Side.p], xPositive.'C+');

  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.y], Side.n], yNegative.'C+');

  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.y], Side.p], yPositive.'C+');

  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.z], Side.n], zNegative.'C+');
  <font color="red">connect</font>('C+'.boundaries[transCart[Axis.z], Side.p], zPositive.'C+');

  <font color="darkgreen">// e-</font>
  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.x], Side.n], xNegative.'e-');

  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.x], Side.p], xPositive.'e-');

  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.y], Side.n], yNegative.'e-');

  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.y], Side.p], yPositive.'e-');

  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.z], Side.n], zNegative.'e-');
  <font color="red">connect</font>('e-'.boundaries[transCart[Axis.z], Side.p], zPositive.'e-');

<font color="blue">end </font>Graphite;
</pre>
<hr>

<h2><img src="FCSys.Phases.IonomerI.png" alt="FCSys.Phases.Ionomer" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Phases.Ionomer"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.Ionomer</h2>
<b>Ionomer phase</b>
<img src="FCSys.Phases.IonomerD.png" alt="FCSys.Phases.Ionomer">

<h3>Information</h3>

<p>Assumptions:<ol>
    <li>The water in the ionomer does not directly participate in the reaction (only the water vapor does).</li>
    </ol</p>

    <p>See <a href="FCSys_Species_'H+'_Ionomer.html#FCSys.Species.'H+'.Ionomer.Fixed">Species.'H+'.Ionomer.Fixed</a>

    for additional assumptions.
    For more information, please see the
 <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> model.</p>
Extends from <a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Solid">Icons.Phases.Solid</a> (Icon for a solid phase), <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> (Base model for a phase).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>countTrue({&#39;inclSO3-&#39;,&#39;inclH&hellip;</td><td>Number of species</td></tr>
<tr><td>Integer</td><td>n_trans</td><td>1</td><td>Number of transport axes</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Volume">Volume</a></td><td>V</td><td>-amagat.V</td><td>Volume of the phase [L3]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Length factors for transport [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Independence factors</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Phi[n_inter, n_trans]</td><td>ones(n_inter, n_trans)</td><td>For translational exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Q[n_inter]</td><td>ones(n_inter)</td><td>For thermal exchange with other phases [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Species</td></tr>
<tr><td>Boolean</td><td>&#39;inclSO3-&#39;</td><td>false</td><td>Include C19HF37O5S- (abbreviated as SO3-)</td></tr>
<tr><td><a href="FCSys_Species_'SO3-'_Ionomer.html#FCSys.Species.'SO3-'.Ionomer.Fixed">Fixed</a></td><td>&#39;SO3-&#39;</td><td>redeclare FCSys.Species.&#39;SO3&hellip;</td><td>SO3- model</td></tr>
<tr><td>Boolean</td><td>&#39;inclH+&#39;</td><td>false</td><td>Include H+</td></tr>
<tr><td><a href="FCSys_Species_'H+'_Ionomer.html#FCSys.Species.'H+'.Ionomer.Fixed">Fixed</a></td><td>&#39;H+&#39;</td><td>redeclare FCSys.Species.&#39;H+&#39;&hellip;</td><td>H+ model</td></tr>
<tr><td>Boolean</td><td>inclH2O</td><td>false</td><td>Include H2O</td></tr>
<tr><td><a href="FCSys_Species_H2O_Ionomer.html#FCSys.Species.H2O.Ionomer.Fixed">Fixed</a></td><td>H2O</td><td>redeclare FCSys.Species.H2O&hellip;.</td><td>H2O model</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Exchange (click to edit)</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>common</td><td>&nbsp;</td><td>Among all species in the phase</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>&#39;H+_SO3-&#39;</td><td>&nbsp;</td><td>Between H<sup>+</sup> and SO<sub>3</sub><sup>-</sup>)</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>&#39;H+_H2O&#39;</td><td>&nbsp;</td><td>Between H<sup>+</sup> and H<sub>2</sub>O</td></tr>
<tr><td><a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a></td><td>&#39;H2O_SO3-&#39;</td><td>&nbsp;</td><td>Between H<sub>2</sub>O and SO<sub>3</sub><sup>-</sup></td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xNegative</td><td>Negative boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yNegative</td><td>Negative boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zNegative</td><td>Negative boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xPositive</td><td>Positive boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yPositive</td><td>Positive boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zPositive</td><td>Positive boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Amagat</a></td><td>amagat</td><td>Connector for additivity of volume</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Inter</a></td><td>inter[n_inter]</td><td>Connector to exchange momentum and energy with other phases</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>chemH2O[H2O.n_chem]</td><td>Chemical connector for H2O</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>&#39;chemH+&#39;[&#39;H+&#39;.n_chem]</td><td>Chemical connector for H+</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Ionomer <font color="darkgreen">&quot;Ionomer phase&quot;</font>
  <font color="blue">import </font>Modelica.Constants.inf;
  <font color="blue">import </font><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Math_BooleanVectors.html#Modelica.Math.BooleanVectors.countTrue">Modelica.Math.BooleanVectors.countTrue</a>;

  <font color="blue">extends </font><a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Solid">Icons.Phases.Solid</a>;
  <font color="blue">extends </font><a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a>(
    <font color="blue">final </font>n_spec=<font color="red">countTrue</font>({'inclSO3-','inclH+',inclH2O}),
    <font color="blue">final </font>V=-amagat.V,
    n_inter=1);

  <font color="darkgreen">// Conditionally include species.</font>
  <font color="blue">parameter </font>Boolean &#39;inclSO3-&#39;=false <font color="darkgreen">
    &quot;Include C19HF37O5S- (abbreviated as SO3-)&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_'SO3-'_Ionomer.html#FCSys.Species.'SO3-'.Ionomer.Fixed">FCSys.Species.'SO3-'.Ionomer.Fixed</a> &#39;SO3-&#39;(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>'inclSO3-' <font color="blue">constrainedby </font>FCSys.Species.Solid(
    n_trans=n_trans,
    n_intra=3,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],'H+_SO3-'.k_Phi[cartTrans],'H2O_SO3-'.k_Phi[
        cartTrans]},
    k_intra_Q={common.k_Q,'H+_SO3-'.k_Q,'H2O_SO3-'.k_Q}) <font color="darkgreen">&quot;SO3- model&quot;</font>;

  <font color="blue">parameter </font>Boolean &#39;inclH+&#39;=false <font color="darkgreen">&quot;Include H+&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_'H+'_Ionomer.html#FCSys.Species.'H+'.Ionomer.Fixed">FCSys.Species.'H+'.Ionomer.Fixed</a> &#39;H+&#39;(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>'inclH+' <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=3,
    n_inter=n_inter,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],'H+_H2O'.k_Phi[cartTrans],'H+_SO3-'.k_Phi[
        cartTrans]},
    k_intra_Q={common.k_Q,'H+_SO3-'.k_Q,'H+_H2O'.k_Q}) <font color="darkgreen">&quot;H+ model&quot;</font>;

  <font color="blue">parameter </font>Boolean inclH2O=false <font color="darkgreen">&quot;Include H2O&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_H2O_Ionomer.html#FCSys.Species.H2O.Ionomer.Fixed">FCSys.Species.H2O.Ionomer.Fixed</a> H2O(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>n_chem,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>k_intra_Phi,
    <font color="blue">final </font>k_intra_Q) <font color="blue">if </font>inclH2O <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_intra=3,
    n_inter=0,
    kL=kL,
    k_intra_Phi={common.k_Phi[cartTrans],'H+_H2O'.k_Phi[cartTrans],'H2O_SO3-'.k_Phi[
        cartTrans]},
    k_intra_Q={common.k_Q,'H+_H2O'.k_Q,'H2O_SO3-'.k_Q}) <font color="darkgreen">&quot;H2O model&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xNegative <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Negative boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yNegative <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Negative boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zNegative <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Negative boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xPositive <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Positive boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yPositive <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Positive boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zPositive <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Positive boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Connectors.Amagat</a> amagat <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Connector for additivity of volume&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Connectors.Inter</a> inter[n_inter](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Connector to exchange momentum and energy with other phases&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> chemH2O[H2O.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>
    inclH2O <font color="darkgreen">&quot;Chemical connector for H2O&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> &#39;chemH+&#39;['H+'.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>
    'inclH+' <font color="darkgreen">&quot;Chemical connector for H+&quot;</font>;

  <font color="darkgreen">// Independence factors</font>
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> common(k_Phi={inf,inf,inf},k_Q=0) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Among all species in the phase&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> &#39;H+_SO3-&#39;(<font color="blue">final </font>k_Phi, k_Q=inf) <font color="blue">if </font>'inclSO3-'<font color="blue"> or </font>'inclH+' <font color="darkgreen">
    &quot;Between H<sup>+</sup> and SO<sub>3</sub><sup>-</sup>)&quot;</font>;
  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> &#39;H+_H2O&#39;(k_Phi={0.02,0.02,0.02}, k_Q=inf) <font color="blue">if </font>'inclH+'<font color="blue"> or </font>
    inclH2O <font color="darkgreen">&quot;Between H<sup>+</sup> and H<sub>2</sub>O&quot;</font>;

  <a href="FCSys_Phases.html#FCSys.Phases.ExchangeParams">ExchangeParams</a> &#39;H2O_SO3-&#39;(k_Phi={1,1,1}, k_Q=inf) <font color="blue">if </font>'inclSO3-'<font color="blue"> or </font>inclH2O <font color="darkgreen">
    &quot;Between H<sub>2</sub>O and SO<sub>3</sub><sup>-</sup>&quot;</font>;

<font color="blue">protected </font>
  <a href="FCSys_Conditions_Adapters.html#FCSys.Conditions.Adapters.AmagatDalton">Conditions.Adapters.AmagatDalton</a> amagatDalton <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Adapter between additivity of volume and additivity of pressure&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> exchCommon <font color="darkgreen">
    &quot;Connector for exchange among all species in the phase&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> &#39;exchH+_SO3-&#39; <font color="darkgreen">
    &quot;Connector for exchange between H+ and SO3-&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> &#39;exchH+_H2O&#39; <font color="darkgreen">&quot;Connector for exchange between H+ and H2O&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.InertNode">Connectors.InertNode</a> &#39;exchH2O_SO3-&#39; <font color="darkgreen">
    &quot;Connector for exchange between H2O and SO3-&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Chemical exchange</font>
  <font color="red">connect</font>(H2O.chemical, chemH2O);
  <font color="red">connect</font>('H+'.chemical, 'chemH+');

  <font color="darkgreen">// Inert exchange</font>
  <font color="red">connect</font>('SO3-'.inter, inter);

  <font color="red">connect</font>('SO3-'.intra[1], exchCommon.node);
  <font color="red">connect</font>('SO3-'.intra[2], 'exchH+_SO3-'.node);
  <font color="red">connect</font>('SO3-'.intra[3], 'exchH2O_SO3-'.node);
  <font color="red">connect</font>('H+'.intra[1], exchCommon.node);
  <font color="red">connect</font>('H+'.intra[2], 'exchH+_H2O'.node);
  <font color="red">connect</font>('H+'.intra[3], 'exchH+_SO3-'.node);

  <font color="red">connect</font>(H2O.intra[1], exchCommon.node);
  <font color="red">connect</font>(H2O.intra[2], 'exchH+_H2O'.node);
  <font color="red">connect</font>(H2O.intra[3], 'exchH2O_SO3-'.node);

  <font color="darkgreen">// Mixing</font>
  <font color="red">connect</font>('SO3-'.dalton, amagatDalton.dalton);
  <font color="red">connect</font>('H+'.dalton, amagatDalton.dalton);
  <font color="red">connect</font>(H2O.dalton, amagatDalton.dalton);
  <font color="red">connect</font>(amagatDalton.amagat, amagat);

  <font color="darkgreen">// Transport</font>
  <font color="darkgreen">// ---------</font>
  <font color="darkgreen">// SO3-</font>
  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.x], Side.n], xNegative.'SO3-');

  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.x], Side.p], xPositive.'SO3-');

  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.y], Side.n], yNegative.'SO3-');

  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.y], Side.p], yPositive.'SO3-');

  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.z], Side.n], zNegative.'SO3-');
  <font color="red">connect</font>('SO3-'.boundaries[transCart[Axis.z], Side.p], zPositive.'SO3-');
  <font color="darkgreen">// &#39;H+&#39;</font>
  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.x], Side.n], xNegative.'H+');

  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.x], Side.p], xPositive.'H+');

  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.y], Side.n], yNegative.'H+');

  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.y], Side.p], yPositive.'H+');

  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.z], Side.n], zNegative.'H+');
  <font color="red">connect</font>('H+'.boundaries[transCart[Axis.z], Side.p], zPositive.'H+');
  <font color="darkgreen">// H2O</font>
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.n], xNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.p], xPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.n], yNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.p], yPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.n], zNegative.H2O);
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.p], zPositive.H2O);

<font color="blue">end </font>Ionomer;
</pre>
<hr>

<h2><img src="FCSys.Phases.LiquidI.png" alt="FCSys.Phases.Liquid" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Phases.Liquid"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.Liquid</h2>
<b>Liquid phase</b>
<img src="FCSys.Phases.LiquidD.png" alt="FCSys.Phases.Liquid">

<h3>Information</h3>

<p>Please see the documentation of the
 <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> model.</p>
Extends from <a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Liquid">Icons.Phases.Liquid</a> (Icon for a liquid phase), <a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a> (Base model for a phase).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>if inclH2O then 1 else 0</td><td>Number of species</td></tr>
<tr><td>Integer</td><td>n_trans</td><td>1</td><td>Number of transport axes</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.Volume">Volume</a></td><td>V</td><td>-amagat.V</td><td>Volume of the phase [L3]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Length factors for transport [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Independence factors</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Phi[n_inter, n_trans]</td><td>ones(n_inter, n_trans)</td><td>For translational exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Q[n_inter]</td><td>ones(n_inter)</td><td>For thermal exchange with other phases [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Species</td></tr>
<tr><td>Boolean</td><td>inclH2O</td><td>false</td><td>Include H2O</td></tr>
<tr><td><a href="FCSys_Species_H2O_Liquid.html#FCSys.Species.H2O.Liquid.Fixed">Fixed</a></td><td>H2O</td><td>redeclare FCSys.Species.H2O&hellip;.</td><td>H2O model</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xNegative</td><td>Negative boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yNegative</td><td>Negative boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zNegative</td><td>Negative boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>xPositive</td><td>Positive boundary along the x axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>yPositive</td><td>Positive boundary along the y axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">BoundaryBus</a></td><td>zPositive</td><td>Positive boundary along the z axis</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Inter</a></td><td>inter[n_inter]</td><td>Connector to exchange momentum and energy with other phases</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Amagat</a></td><td>amagat</td><td>Connector for additivity of volume</td></tr>
<tr><td><a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Chemical</a></td><td>chemH2O[H2O.n_chem]</td><td>Chemical connector for H2O</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Liquid <font color="darkgreen">&quot;Liquid phase&quot;</font>
  <font color="blue">extends </font><a href="FCSys_Icons_Phases.html#FCSys.Icons.Phases.Liquid">Icons.Phases.Liquid</a>;
  <font color="blue">extends </font><a href="FCSys_Phases.html#FCSys.Phases.PartialPhase">PartialPhase</a>(<font color="blue">final </font>n_spec=<font color="blue">if </font>inclH2O<font color="blue"> then </font>1<font color="blue"> else </font>0,<font color="blue">final </font>V=-amagat.V);

  <font color="darkgreen">// Conditionally include species.</font>
  <font color="blue">parameter </font>Boolean inclH2O=false <font color="darkgreen">&quot;Include H2O&quot;</font>;

  <font color="darkgreen">// Auxiliary variables (for analysis)</font>
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.PressureAbsolute">Q.PressureAbsolute</a> p(stateSelect=StateSelect.never) = amagat.p <font color="blue">if </font>
    n_spec &gt; 0<font color="blue"> and </font>environment.analysis <font color="darkgreen">&quot;Total thermodynamic pressure&quot;</font>;

  <font color="blue">replaceable </font><a href="FCSys_Species_H2O_Liquid.html#FCSys.Species.H2O.Liquid.Fixed">FCSys.Species.H2O.Liquid.Fixed</a> H2O(
    <font color="blue">final </font>n_trans,
    <font color="blue">final </font>n_inter,
    <font color="blue">final </font>kL,
    <font color="blue">final </font>n_chem) <font color="blue">if </font>inclH2O <font color="blue">constrainedby </font>FCSys.Species.Fluid(
    n_trans=n_trans,
    n_inter=n_inter,
    kL=kL) <font color="darkgreen">&quot;H2O model&quot;</font>;

  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xNegative <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Negative boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yNegative <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Negative boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zNegative <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Negative boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> xPositive <font color="blue">if </font>inclTrans[Axis.x] <font color="darkgreen">
    &quot;Positive boundary along the x axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> yPositive <font color="blue">if </font>inclTrans[Axis.y] <font color="darkgreen">
    &quot;Positive boundary along the y axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.BoundaryBus">Connectors.BoundaryBus</a> zPositive <font color="blue">if </font>inclTrans[Axis.z] <font color="darkgreen">
    &quot;Positive boundary along the z axis&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Inter">Connectors.Inter</a> inter[n_inter](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Connector to exchange momentum and energy with other phases&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Amagat">Connectors.Amagat</a> amagat <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Connector for additivity of volume&quot;</font>;
  <a href="FCSys_Connectors.html#FCSys.Connectors.Chemical">Connectors.Chemical</a> chemH2O[H2O.n_chem](<font color="blue">each </font><font color="blue">final </font>n_trans=n_trans) <font color="blue">if </font>
    inclH2O <font color="darkgreen">&quot;Chemical connector for H2O&quot;</font>;

<font color="blue">protected </font>
  <a href="FCSys_Conditions_Adapters.html#FCSys.Conditions.Adapters.AmagatDalton">Conditions.Adapters.AmagatDalton</a> amagatDalton <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Adapter between additivity of volume and additivity of pressure&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Chemical exchange</font>
  <font color="red">connect</font>(H2O.chemical, chemH2O);

  <font color="darkgreen">// Inert exchange</font>
  <font color="red">connect</font>(H2O.inter, inter);

  <font color="darkgreen">// Mixing</font>
  <font color="red">connect</font>(amagatDalton.amagat, amagat);
  <font color="red">connect</font>(amagatDalton.dalton, H2O.dalton);

  <font color="darkgreen">// Transport</font>
  <font color="darkgreen">// ---------</font>
  <font color="darkgreen">// H2O</font>
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.n], xNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.x], Side.p], xPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.n], yNegative.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.y], Side.p], yPositive.H2O);

  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.n], zNegative.H2O);
  <font color="red">connect</font>(H2O.boundaries[transCart[Axis.z], Side.p], zPositive.H2O);

<font color="blue">end </font>Liquid;
</pre>
<hr>

<h2><a name="FCSys.Phases.PartialPhase"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.PartialPhase</h2>

<b>Base model for a phase</b>

<h3>Information</h3>

<p>The scaling factor for diffusive transport (<b><i>k</i></b>) is a vector which directly affects

    the resistance associated with the transport of material, transverse translational momentum, and energy of all of the species
    within the phase.  It can be used to introduce minor head loss or the effects of
    porosity or tortousity.  These effects may be anisotropic.  Using
    Bruggeman correction [<a href="FCSys_UsersGuide_References.html#FCSys.UsersGuide.References.Weber2004">Weber2004</a>, p.&nbsp;4696],
    the factor (<b><i>k</i></b>) within a phase should be set to &epsilon;<sup>-1/2</sup>
    along each axis, where &epsilon; is the volumetric filling ratio, or the ratio of the volume of the phase to the total volume of the subregion.
    The Bruggeman factor itself increases resistance by a &epsilon;<sup>-3/2</sup>, but a factor of &epsilon;<sup>-1</sup> is included inherently.</p>

<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Integer</td><td>n_spec</td><td>&nbsp;</td><td>Number of species</td></tr>
<tr><td>Integer</td><td>n_trans</td><td>1</td><td>Number of transport axes</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k[Axis]</td><td>{1,1,1}</td><td>Length factors for transport [1]</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Independence factors</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Phi[n_inter, n_trans]</td><td>ones(n_inter, n_trans)</td><td>For translational exchange with other phases [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_inter_Q[n_inter]</td><td>ones(n_inter)</td><td>For thermal exchange with other phases [1]</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">partial </font><font color="blue">model</font> PartialPhase <font color="darkgreen">&quot;Base model for a phase&quot;</font>
  <font color="blue">import </font><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Math_BooleanVectors.html#Modelica.Math.BooleanVectors.index">Modelica.Math.BooleanVectors.index</a>;

  <font color="blue">parameter </font>Integer n_spec(start=0) <font color="darkgreen">&quot;Number of species&quot;</font>;
  <font color="blue">parameter </font>Integer n_inter=0 <font color="darkgreen">
    &quot;Number of exchange connections with other phases&quot;</font>;

  <font color="darkgreen">// Geometric parameters</font>
  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k[Axis](
    <font color="blue">each </font>min=Modelica.Constants.small,
    <font color="blue">each </font><font color="blue">final </font>nominal=1) = {1,1,1} <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Length factors for transport&quot;</font>;
  <font color="blue">parameter </font>Integer n_trans=1 <font color="darkgreen">&quot;Number of transport axes&quot;</font>;
  <font color="darkgreen">// Note:  This can&#39;t be an inner/outer parameter in Dymola 2014.</font>
  <font color="blue">inner </font><a href="FCSys_Quantities.html#FCSys.Quantities.Volume">Q.Volume</a> V=0 <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Volume of the phase&quot;</font>;

  <font color="darkgreen">// Independence factors</font>
  <font color="blue">inner </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k_inter_Phi[n_inter, n_trans]=<font color="red">ones</font>(n_inter,
      n_trans) <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;For translational exchange with other phases&quot;</font>;
  <font color="blue">inner </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k_inter_Q[n_inter]=<font color="red">ones</font>(n_inter) <font color="blue">if </font>n_spec &gt;
    0 <font color="darkgreen">&quot;For thermal exchange with other phases&quot;</font>;

  <font color="darkgreen">// Auxiliary variables (for analysis)</font>
  <font color="blue">output </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> epsilon=V/<font color="red">product</font>(L) <font color="blue">if </font>n_spec &gt; 0<font color="blue"> and </font>environment.analysis
    <font color="darkgreen">&quot;Volumetric fill fraction&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">outer </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Length">Q.Length</a> L[Axis] <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">&quot;Length of the subregion&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.Length">Q.Length</a> kL[:]=k[cartTrans] .* L[cartTrans] <font color="blue">if </font>n_spec &gt; 0 <font color="darkgreen">
    &quot;Effective transport lengths&quot;</font>;
  <font color="blue">final </font><font color="blue">inner </font><a href="FCSys_Quantities.html#FCSys.Quantities.Area">Q.Area</a> Aprime[n_trans]=<font color="red">fill</font>(V, n_trans) ./ L[cartTrans] <font color="blue">if </font>n_spec &gt;
    0 <font color="darkgreen">&quot;Effective cross-sectional areas&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Integer cartTrans[:] <font color="darkgreen">
    &quot;Cartesian-axis indices of the components of translational momentum&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Integer transCart[:] <font color="darkgreen">
    &quot;Boundary-pair indices of the Cartesian axes&quot;</font>;
  <font color="blue">outer </font><font color="blue">parameter </font>Boolean inclTrans[Axis] <font color="darkgreen">
    &quot;true, if each pair of boundaries is included&quot;</font>;

  <font color="blue">outer </font><a href="FCSys_Conditions.html#FCSys.Conditions.Environment">Conditions.Environment</a> environment <font color="darkgreen">&quot;Environmental conditions&quot;</font>;

<font color="blue">end </font>PartialPhase;
</pre>
<hr>

<h2><img src="FCSys.Phases.ExchangeParamsI.png" alt="FCSys.Phases.ExchangeParams" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Phases.ExchangeParams"></a><a href="FCSys_Phases.html#FCSys.Phases">FCSys.Phases</a>.ExchangeParams</h2>
<b>Independence factors for an exchange process</b>

<h3>Information</h3>

Extends from <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Icons.html#Modelica.Icons.Record">Modelica.Icons.Record</a> (Icon for records).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_Phi[Axis]</td><td>{1,1,1}</td><td>Translational [1]</td></tr>
<tr><td><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">NumberAbsolute</a></td><td>k_Q</td><td>1</td><td>Thermal [1]</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">record</font> ExchangeParams <font color="darkgreen">&quot;Independence factors for an exchange process&quot;</font>
  <font color="blue">extends </font><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Icons.html#Modelica.Icons.Record">Modelica.Icons.Record</a>;

  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k_Phi[Axis]={1,1,1} <font color="darkgreen">&quot;Translational&quot;</font>;
  <font color="blue">parameter </font><a href="FCSys_Quantities.html#FCSys.Quantities.NumberAbsolute">Q.NumberAbsolute</a> k_Q=1 <font color="darkgreen">&quot;Thermal&quot;</font>;

<font color="blue">end </font>ExchangeParams;
</pre>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  Copyright &copy; 2007&ndash;2014, Kevin Davies, Hawaii Natural Energy Institute. Last updated Thu Jan 23 09:06:56 2014.
</div>
</body>
</html>
