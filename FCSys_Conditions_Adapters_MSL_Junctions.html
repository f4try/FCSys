<html>
<head>
<title>FCSys.Conditions.Adapters.MSL.Junctions</title>
<meta name="title" content="Modelica fuel cell library">
<meta name="keywords" content="fuel cell library, FCSys, fuel cell, PEM, proton exchange membrane, polymer exchange membrane, PEMFC, Modelica, Dymola, open-source, electrochemistry">
<meta name="date" content="2014-1-23">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&lt;html&gt;&lt;a href=\&quot;modelica://Modelica\&quot;&gt;Modelica&lt;/a&gt; junctions between pure substances and their mixtures&lt;/html&gt;">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="stylesheets/ModelicaDoc.css">
<link rel="shortcut icon" href="images/favicon.ico">
<script type="text/javascript" src="javascripts/analytics.js"></script>
</head>
<body>
<span itemscope itemtype="http://schema.org/SoftwareApplication">
<div class="sidebar">
  <div class="sidebarwrapper">
  <a href="index.html">

<h2>FCSys</h2>

</a>
  <p align=center><a href="index.html">
    <img src="images/icon.gif" alt="Logo" width=150>
  </a></p>

<h3>Table of Contents</h3>

<ul>
    <li><a href="FCSys_UsersGuide.html">User's Guide</a></li>
    <li><a href="FCSys_Blocks.html">Blocks</a></li>
    <li><a href="FCSys_Conditions.html">Conditions</a></li>
    <li><a href="FCSys_Assemblies.html">Assemblies</a></li>
    <li><a href="FCSys_Regions.html">Regions</a></li>
    <li><a href="FCSys_Subregions.html">Subregions</a></li>
    <li><a href="FCSys_Phases.html">Phases</a></li>
    <li><a href="FCSys_Species.html">Species</a></li>
    <li><a href="FCSys_Chemistry.html">Chemistry</a></li>
    <li><a href="FCSys_Connectors.html">Connectors</a></li>
    <li><a href="FCSys_Characteristics.html">Characteristics</a></li>
    <li><a href="FCSys_Units.html">Units</a></li>
    <li><a href="FCSys_Quantities.html">Quantities</a></li>
    <li><a href="FCSys_Utilities.html">Utilities</a></li>
    <li><a href="FCSys_Icons.html">Icons</a></li>
    </ul>

  <h3>Download</h3>
    <ul>
      <li><span itemprop="downloadUrl">Latest: <a href="https://github.com/kdavies4/FCSys/archive/v0.2.5.zip">v0.2.5</a> (2014-01-23)</span></li>
    </ul>
  </div>
</div>

<div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper">
      <div class="body">

<h2><a name="FCSys.Conditions.Adapters.MSL.Junctions"></a><a href="FCSys_Conditions_Adapters_MSL.html#FCSys.Conditions.Adapters.MSL">FCSys.Conditions.Adapters.MSL</a>.Junctions</h2>

<b><a href="http://build.openmodelica.org/Documentation/Modelica.html#Modelica">Modelica</a> junctions between pure substances and their mixtures</b>

<h3>Information</h3>

Extends from <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Icons_Package.html#Modelica.Icons.Package">Modelica.Icons.Package</a> (Icon for standard packages).

<h3>Package Content</h3>

<table border=1 cellspacing=0 cellpadding=2 >
<tr><th>Name</th><th>Description</th></tr>
<tr><td><img src="images/FCSys.Conditions.Adapters4d4304250c14d39ation2S.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction2" width=20  height=20 align=top>&nbsp;<a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction2">Junction2</a>
</td><td>Junction between two pure substances and their mixture</td></tr>
<tr><td><img src="images/FCSys.Conditions.Adapters4d4304260c14d39btion3S.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction3" width=20  height=20 align=top>&nbsp;<a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction3">Junction3</a>
</td><td>Junction between three pure substances and their mixture</td></tr>
<tr><td><img src="images/FCSys.Conditions.Adaptersf99e308c52cb99f0ctionS.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction" width=20  height=20 align=top>&nbsp;<a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">PartialJunction</a>
</td><td>Base model for a junction between pure substances and their mixture</td></tr>
</table>
<hr>

<h2><img src="images/FCSys.Conditions.Adapters4d4304250c14d39ation2I.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction2" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Conditions.Adapters.MSL.Junctions.Junction2"></a><a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions">FCSys.Conditions.Adapters.MSL.Junctions</a>.Junction2</h2>
<b>Junction between two pure substances and their mixture</b>
<img src="images/FCSys.Conditions.Adapters4d4304250c14d39ation2D.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction2">

<h3>Information</h3>

<p>Assumptions:</p>
  <ol>
  <li>The mixing is ideal.  If the pure substances are being combined,
  then the massic enthalpy of the mixture is the mass-weighted sum of the pure substances.
  If the mixture is being split, then each of the pure substances receives fluid
  at the same massic enthalpy.
  </li>
  <li>The mixture observes Dalton's law.  The pressure of the mixture is the sum
  of the pressures of the pure substances.
  </li>
  </ol>
Extends from <a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">PartialJunction</a> (Base model for a junction between pure substances and their mixture).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Material properties</td></tr>
<tr><TD colspan="2">replaceable package MixtureMedium</td><td>Media.AnodeGas</td><td>Medium model for the mixture</td></tr>
<tr><TD colspan="2">replaceable package Medium1</td><td>Modelica.Media.IdealGases.Si&hellip;</td><td>Medium model for the 1<sup>st</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium2</td><td>Modelica.Media.IdealGases.Si&hellip;</td><td>Medium model for the 2<sup>nd</sup> pure substance</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td><td>mixturePort</td><td>Fluid port for the mixture</td></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td><td>purePort1</td><td>Fluid port for the 1st pure substance</td></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td><td>purePort2</td><td>Fluid port for the 2nd pure substance</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=3>Material properties</td></tr>
<tr><TD colspan="2">replaceable package Medium1</td><td>Medium model for the 1<sup>st</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium2</td><td>Medium model for the 2<sup>nd</sup> pure substance</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Junction2 <font color="darkgreen">
  &quot;Junction between two pure substances and their mixture&quot;</font>
  <font color="blue">import </font>assert = <a href="FCSys_Utilities.html#FCSys.Utilities.assertEval">FCSys.Utilities.assertEval</a>;
  <font color="blue">extends </font><a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">PartialJunction</a>;

  <font color="blue">replaceable </font><font color="blue">package</font> Medium1 = <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Media_IdealGases_SingleGases_H2.html#Modelica.Media.IdealGases.SingleGases.H2">Modelica.Media.IdealGases.SingleGases.H2</a> <font color="blue">
    constrainedby </font>Modelica.Media.Interfaces.PartialPureSubstance <font color="darkgreen">
    &quot;Medium model for the 1<sup>st</sup> pure substance&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium2 = <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Media_IdealGases_SingleGases_H2O.html#Modelica.Media.IdealGases.SingleGases.H2O">Modelica.Media.IdealGases.SingleGases.H2O</a> <font color="blue">
    constrainedby </font>Modelica.Media.Interfaces.PartialPureSubstance <font color="darkgreen">
    &quot;Medium model for the 2<sup>nd</sup> pure substance&quot;</font>;

  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">Modelica.Fluid.Interfaces.FluidPort_b</a> purePort1(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_Medium1.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction2.Medium1">Medium1</a>) <font color="darkgreen">&quot;Fluid port for the 1st pure substance&quot;</font>;
  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">Modelica.Fluid.Interfaces.FluidPort_b</a> purePort2(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_Medium2.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction2.Medium2">Medium2</a>) <font color="darkgreen">&quot;Fluid port for the 2nd pure substance&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Check the number and names of substances</font>
  <font color="red">assert</font>(MixtureMedium.nS == 2, &quot;The mixture medium must have exactly two substances.&quot;);
  <font color="red">assert</font>(MixtureMedium.substanceNames[1] == Medium1.substanceNames[1], &quot;The first substance of the mixture medium (MixtureMedium) is \&quot;&quot;
     + MixtureMedium.substanceNames[1] + &quot;\&quot;,
but the first pure substance is \&quot;&quot; + Medium1.substanceNames[1] + &quot;\&quot;.&quot;);
  <font color="red">assert</font>(MixtureMedium.substanceNames[2] == Medium2.substanceNames[1], &quot;The second substance of the mixture medium (MixtureMedium) is \&quot;&quot;
     + MixtureMedium.substanceNames[2] + &quot;\&quot;,
but the second pure substance is \&quot;&quot; + Medium2.substanceNames[1] + &quot;\&quot;.&quot;);

  <font color="darkgreen">// Check the extra properties.</font>
  <font color="red">assert</font>(MixtureMedium.nC == Medium1.nC<font color="blue"> and </font>MixtureMedium.nC == Medium2.nC, &quot;The media must all have the same number of extra properties.&quot;);
  <font color="blue">for </font>i<font color="blue"> in </font>1:MixtureMedium.nC<font color="blue"> loop</font>
    <font color="red">assert</font>(MixtureMedium.extraPropertiesNames[i] == Medium1.extraPropertiesNames[
      i], &quot;Extra property #&quot; + <font color="red">String</font>(i) + &quot; of the mixture medium (MixtureMedium) is \&quot;&quot;
       + MixtureMedium.extraPropertiesNames[i] + &quot;\&quot;,
but that of the first pure substance (Medium1) is \&quot;&quot; + Medium1.extraPropertiesNames[
      i] + &quot;\&quot;.&quot;);
    <font color="red">assert</font>(MixtureMedium.extraPropertiesNames[i] == Medium2.extraPropertiesNames[
      i], &quot;Extra property #&quot; + <font color="red">String</font>(i) + &quot; of the mixture medium (MixtureMedium) is \&quot;&quot;
       + MixtureMedium.extraPropertiesNames[i] + &quot;\&quot;,
but that of the second pure substance (Medium2) is \&quot;&quot; + Medium2.extraPropertiesNames[
      i] + &quot;\&quot;.&quot;);
  <font color="blue">end for</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Dalton&#39;s law (additivity of pressure)</font>
  mixturePort.p = purePort1.p + purePort2.p;

  <font color="darkgreen">// Streams</font>
  <font color="darkgreen">// -------</font>
  <font color="darkgreen">// Enthalpy</font>
  purePort1.h_outflow = <font color="red">inStream</font>(mixturePort.h_outflow);
  purePort2.h_outflow = <font color="red">inStream</font>(mixturePort.h_outflow);
  mixturePort.h_outflow = X*{<font color="red">inStream</font>(purePort1.h_outflow),<font color="red">inStream</font>(purePort2.h_outflow)};
  <font color="darkgreen">// </font>
  <font color="darkgreen">// Extra properties</font>
  purePort1.C_outflow = <font color="red">inStream</font>(mixturePort.C_outflow);
  purePort2.C_outflow = <font color="red">inStream</font>(mixturePort.C_outflow);
  mixturePort.C_outflow = X*{<font color="red">inStream</font>(purePort1.C_outflow),<font color="red">inStream</font>(purePort2.C_outflow)};

  <font color="darkgreen">// Mass conservation (no storage)</font>
  0 = X[1]*mixturePort.m_flow + purePort1.m_flow <font color="darkgreen">&quot;Substance 1&quot;</font>;
  0 = X[2]*mixturePort.m_flow + purePort2.m_flow <font color="darkgreen">&quot;Substance 2&quot;</font>;
<font color="blue">end </font>Junction2;
</pre>
<hr>

<h2><img src="images/FCSys.Conditions.Adapters4d4304260c14d39btion3I.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction3" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Conditions.Adapters.MSL.Junctions.Junction3"></a><a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions">FCSys.Conditions.Adapters.MSL.Junctions</a>.Junction3</h2>
<b>Junction between three pure substances and their mixture</b>
<img src="images/FCSys.Conditions.Adapters4d4304260c14d39btion3D.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.Junction3">

<h3>Information</h3>

<p>Assumptions:</p>
  <ol>
  <li>The mixing is ideal.  If the pure substances are being combined,
  then the massic enthalpy of the mixture is the mass-weighted sum of the pure substances.
  If the mixture is being split, then each of the pure substances receives fluid
  at the same massic enthalpy.
  </li>
  <li>The mixture observes Dalton's law.  The pressure of the mixture is the sum
  of the pressures of the pure substances.
  </li>
  </ol>
Extends from <a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">PartialJunction</a> (Base model for a junction between pure substances and their mixture).
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Material properties</td></tr>
<tr><TD colspan="2">replaceable package MixtureMedium</td><td>Media.CathodeGas</td><td>Medium model for the mixture</td></tr>
<tr><TD colspan="2">replaceable package Medium1</td><td>Modelica.Media.IdealGases.Si&hellip;</td><td>Medium model for the 1<sup>st</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium2</td><td>Modelica.Media.IdealGases.Si&hellip;</td><td>Medium model for the 2<sup>nd</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium3</td><td>Modelica.Media.IdealGases.Si&hellip;</td><td>Medium model for the 3<sup>rd</sup> pure substance</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td><td>mixturePort</td><td>Fluid port for the mixture</td></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td><td>purePort1</td><td>Fluid port for the 1st pure substance</td></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td><td>purePort2</td><td>Fluid port for the 2nd pure substance</td></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">FluidPort_b</a></td><td>purePort3</td><td>Fluid port for the 3rd pure substance</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=3>Material properties</td></tr>
<tr><TD colspan="2">replaceable package MixtureMedium</td><td>Medium model for the mixture</td></tr>
<tr><TD colspan="2">replaceable package Medium1</td><td>Medium model for the 1<sup>st</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium2</td><td>Medium model for the 2<sup>nd</sup> pure substance</td></tr>
<tr><TD colspan="2">replaceable package Medium3</td><td>Medium model for the 3<sup>rd</sup> pure substance</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">model</font> Junction3 <font color="darkgreen">
  &quot;Junction between three pure substances and their mixture&quot;</font>
  <font color="blue">import </font>assert = <a href="FCSys_Utilities.html#FCSys.Utilities.assertEval">FCSys.Utilities.assertEval</a>;
  <font color="blue">extends </font><a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">PartialJunction</a>(<font color="blue">redeclare </font><font color="blue">replaceable </font><font color="blue">package</font> MixtureMedium = <a href="FCSys_Conditions_Adapters_MSL_Media_CathodeGas.html#FCSys.Conditions.Adapters.MSL.Media.CathodeGas">Media.CathodeGas</a>);

  <font color="blue">replaceable </font><font color="blue">package</font> Medium1 = <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Media_IdealGases_SingleGases_H2O.html#Modelica.Media.IdealGases.SingleGases.H2O">Modelica.Media.IdealGases.SingleGases.H2O</a> <font color="blue">
    constrainedby </font>Modelica.Media.Interfaces.PartialPureSubstance <font color="darkgreen">
    &quot;Medium model for the 1<sup>st</sup> pure substance&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium2 = <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Media_IdealGases_SingleGases_N2.html#Modelica.Media.IdealGases.SingleGases.N2">Modelica.Media.IdealGases.SingleGases.N2</a> <font color="blue">
    constrainedby </font>Modelica.Media.Interfaces.PartialPureSubstance <font color="darkgreen">
    &quot;Medium model for the 2<sup>nd</sup> pure substance&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium3 = <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Media_IdealGases_SingleGases_O2.html#Modelica.Media.IdealGases.SingleGases.O2">Modelica.Media.IdealGases.SingleGases.O2</a> <font color="blue">
    constrainedby </font>Modelica.Media.Interfaces.PartialPureSubstance <font color="darkgreen">
    &quot;Medium model for the 3<sup>rd</sup> pure substance&quot;</font>;

  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">Modelica.Fluid.Interfaces.FluidPort_b</a> purePort1(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_Medium1.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction3.Medium1">Medium1</a>) <font color="darkgreen">&quot;Fluid port for the 1st pure substance&quot;</font>;
  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">Modelica.Fluid.Interfaces.FluidPort_b</a> purePort2(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_Medium2.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction3.Medium2">Medium2</a>) <font color="darkgreen">&quot;Fluid port for the 2nd pure substance&quot;</font>;
  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b">Modelica.Fluid.Interfaces.FluidPort_b</a> purePort3(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_Medium3.html#FCSys.Conditions.Adapters.MSL.Junctions.Junction3.Medium3">Medium3</a>) <font color="darkgreen">&quot;Fluid port for the 3rd pure substance&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Check the number and names of substances</font>
  <font color="red">assert</font>(MixtureMedium.nS == 3, &quot;The mixture medium must have exactly three substances.&quot;);
  <font color="red">assert</font>(MixtureMedium.substanceNames[1] == Medium1.substanceNames[1], &quot;The first substance of the mixture medium (MixtureMedium) is \&quot;&quot;
     + MixtureMedium.substanceNames[1] + &quot;\&quot;,
but the first pure substance is \&quot;&quot; + Medium1.substanceNames[1] + &quot;\&quot;.&quot;);
  <font color="red">assert</font>(MixtureMedium.substanceNames[2] == Medium2.substanceNames[1], &quot;The second substance of the mixture medium (MixtureMedium) is \&quot;&quot;
     + MixtureMedium.substanceNames[2] + &quot;\&quot;,
but the second pure substance is \&quot;&quot; + Medium2.substanceNames[1] + &quot;\&quot;.&quot;);
  <font color="red">assert</font>(MixtureMedium.substanceNames[3] == Medium3.substanceNames[1], &quot;The second substance of the mixture medium (MixtureMedium) is \&quot;&quot;
     + MixtureMedium.substanceNames[3] + &quot;\&quot;,
but the third pure substance is \&quot;&quot; + Medium2.substanceNames[1] + &quot;\&quot;.&quot;);

  <font color="darkgreen">// Check the extra properties.</font>
  <font color="red">assert</font>(MixtureMedium.nC == Medium1.nC<font color="blue"> and </font>MixtureMedium.nC == Medium2.nC<font color="blue"> and </font>
    MixtureMedium.nC == Medium3.nC, &quot;The media must all have the same number of extra properties.&quot;);
  <font color="blue">for </font>i<font color="blue"> in </font>1:MixtureMedium.nC<font color="blue"> loop</font>
    <font color="red">assert</font>(MixtureMedium.extraPropertiesNames[i] == Medium1.extraPropertiesNames[
      i], &quot;Extra property #&quot; + <font color="red">String</font>(i) + &quot; of the mixture medium (MixtureMedium) is \&quot;&quot;
       + MixtureMedium.extraPropertiesNames[i] + &quot;\&quot;,
but that of the first pure substance (Medium1) is \&quot;&quot; + Medium1.extraPropertiesNames[
      i] + &quot;\&quot;.&quot;);
    <font color="red">assert</font>(MixtureMedium.extraPropertiesNames[i] == Medium2.extraPropertiesNames[
      i], &quot;Extra property #&quot; + <font color="red">String</font>(i) + &quot; of the mixture medium (MixtureMedium) is \&quot;&quot;
       + MixtureMedium.extraPropertiesNames[i] + &quot;\&quot;,
but that of the second pure substance (Medium2) is \&quot;&quot; + Medium2.extraPropertiesNames[
      i] + &quot;\&quot;.&quot;);
    <font color="red">assert</font>(MixtureMedium.extraPropertiesNames[i] == Medium3.extraPropertiesNames[
      i], &quot;Extra property #&quot; + <font color="red">String</font>(i) + &quot; of the mixture medium (MixtureMedium) is \&quot;&quot;
       + MixtureMedium.extraPropertiesNames[i] + &quot;\&quot;,
but that of the third pure substance (Medium3) is \&quot;&quot; + Medium3.extraPropertiesNames[
      i] + &quot;\&quot;.&quot;);
  <font color="blue">end for</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Dalton&#39;s law (additivity of pressure)</font>
  mixturePort.p = purePort1.p + purePort2.p + purePort3.p;

  <font color="darkgreen">// Streams</font>
  <font color="darkgreen">// -------</font>
  <font color="darkgreen">// Enthalpy</font>
  purePort1.h_outflow = <font color="red">inStream</font>(mixturePort.h_outflow);
  purePort2.h_outflow = <font color="red">inStream</font>(mixturePort.h_outflow);
  purePort3.h_outflow = <font color="red">inStream</font>(mixturePort.h_outflow);
  mixturePort.h_outflow = X*{<font color="red">inStream</font>(purePort1.h_outflow),<font color="red">inStream</font>(purePort2.h_outflow),<font color="red">
    inStream</font>(purePort3.h_outflow)};
  <font color="darkgreen">// </font>
  <font color="darkgreen">// Extra properties</font>
  purePort1.C_outflow = <font color="red">inStream</font>(mixturePort.C_outflow);
  purePort2.C_outflow = <font color="red">inStream</font>(mixturePort.C_outflow);
  purePort3.C_outflow = <font color="red">inStream</font>(mixturePort.C_outflow);
  mixturePort.C_outflow = X*{<font color="red">inStream</font>(purePort1.C_outflow),<font color="red">inStream</font>(purePort2.C_outflow),<font color="red">
    inStream</font>(purePort3.C_outflow)};

  <font color="darkgreen">// Mass conservation (no storage)</font>
  0 = X[1]*mixturePort.m_flow + purePort1.m_flow <font color="darkgreen">&quot;Substance 1&quot;</font>;
  0 = X[2]*mixturePort.m_flow + purePort2.m_flow <font color="darkgreen">&quot;Substance 2&quot;</font>;
  0 = X[3]*mixturePort.m_flow + purePort3.m_flow <font color="darkgreen">&quot;Substance 3&quot;</font>;
<font color="blue">end </font>Junction3;
</pre>
<hr>

<h2><img src="images/FCSys.Conditions.Adaptersf99e308c52cb99f0ctionI.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction" align=RIGHT border=1 width=80  height=80 >
<a name="FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction"></a><a href="FCSys_Conditions_Adapters_MSL_Junctions.html#FCSys.Conditions.Adapters.MSL.Junctions">FCSys.Conditions.Adapters.MSL.Junctions</a>.PartialJunction</h2>
<b>Base model for a junction between pure substances and their mixture</b>
<img src="images/FCSys.Conditions.Adaptersf99e308c52cb99f0ctionD.png" alt="FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction">

<h3>Information</h3>

Extends from <a href="FCSys_Icons_Names.html#FCSys.Icons.Names.Top3">FCSys.Icons.Names.Top3</a>.
<p>

<h3>Parameters</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<TR bgcolor="#e0e0e0"><TD colspan=4>Material properties</td></tr>
<tr><TD colspan="2">replaceable package MixtureMedium</td><td>Media.AnodeGas</td><td>Medium model for the mixture</td></tr>
</table>
<p>

<h3>Connectors</h3>

<p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">FluidPort_a</a></td><td>mixturePort</td><td>Fluid port for the mixture</td></tr>
<TR bgcolor="#e0e0e0"><TD colspan=3>Material properties</td></tr>
<tr><TD colspan="2">replaceable package MixtureMedium</td><td>Medium model for the mixture</td></tr>
</table>

<h3>Modelica definition</h3>

<pre>
<font color="blue">partial </font><font color="blue">model</font> PartialJunction <font color="darkgreen">
  &quot;Base model for a junction between pure substances and their mixture&quot;</font>
  <font color="blue">extends </font><a href="FCSys_Icons_Names.html#FCSys.Icons.Names.Top3">FCSys.Icons.Names.Top3</a>;

  <font color="blue">replaceable </font><font color="blue">package</font> MixtureMedium = <a href="FCSys_Conditions_Adapters_MSL_Media_AnodeGas.html#FCSys.Conditions.Adapters.MSL.Media.AnodeGas">Media.AnodeGas</a> <font color="blue">constrainedby </font>
    Modelica.Media.Interfaces.PartialMedium <font color="darkgreen">&quot;Medium model for the mixture&quot;</font>;

  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a">Modelica.Fluid.Interfaces.FluidPort_a</a> mixturePort(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font>
      Medium = <a href="FCSys_Conditions_Adapters_MSL_Junctions_MixtureMedium.html#FCSys.Conditions.Adapters.MSL.Junctions.PartialJunction.MixtureMedium">MixtureMedium</a>) <font color="darkgreen">&quot;Fluid port for the mixture&quot;</font>;

  <a href="file:///C:/Program Files (x86)/Dymola 2014/Modelica/Library/Modelica 3.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction">Modelica.SIunits.MassFraction</a> X[MixtureMedium.nX] <font color="darkgreen">
    &quot;Mass fractions within the mixture&quot;</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Mass fractions</font>
  X = <font color="blue">if </font>MixtureMedium.fixedX<font color="blue"> then </font>MixtureMedium.reference_X<font color="blue"> else </font><font color="blue">if </font>
    MixtureMedium.reducedX<font color="blue"> then </font><font color="red">cat</font>(
    1,
    <font color="red">inStream</font>(mixturePort.Xi_outflow),
    1 - <font color="red">sum</font>(X[1:MixtureMedium.nXi]))<font color="blue"> else </font><font color="red">inStream</font>(mixturePort.Xi_outflow);
  X = <font color="blue">if </font>MixtureMedium.reducedX<font color="blue"> then </font><font color="red">cat</font>(
    1,
    mixturePort.Xi_outflow,
    1 - <font color="red">sum</font>(X[1:MixtureMedium.nXi]))<font color="blue"> else </font>mixturePort.Xi_outflow;
<font color="blue">end </font>PartialJunction;
</pre>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  Copyright &copy; 2007&ndash;2014, Kevin Davies, Hawaii Natural Energy Institute. Last updated Thu Jan 23 09:05:32 2014.
</div>
</span></body></html>
